.container.dossier-edit
  - if dossier.has_annotations?
    %section.counter-start-header-section
      = render NestedForms::FormOwnerComponent.new
      = form_for dossier, url: annotations_instructeur_dossier_path(dossier.procedure, dossier), html: { class: 'form', multipart: true } do |f|
        %fieldset.fr-fieldset= render EditableChamp::SectionComponent.new(dossier:, types_de_champ: dossier.revision.types_de_champ_private)

    - champ_lexpol = dossier.champs.find { |c| c.lexpol? }

    - if champ_lexpol.present?
      %section.fr-section
        .fr-btn-group{ style: "display:flex; gap:1rem; align-items:center;" }
          - if champ_lexpol.value.blank?
            = form_with url: lexpol_upsert_dossier_instructeur_dossier_path(dossier, champ_id: champ_lexpol.id), method: :post, local: true do |form|
              = form.submit 'Créer le dossier dans Lexpol', class: 'fr-btn'
          - else
            = form_with url: lexpol_upsert_dossier_instructeur_dossier_path(dossier, champ_id: champ_lexpol.id), method: :post, local: true do |form|
              = form.submit 'Rafraîchir les données Lexpol', class: 'fr-btn fr-btn--secondary'

    = render Dossiers::EditFooterComponent.new(dossier: dossier, annotation: true)
  - else
    %h2.empty-text Aucune annotation privée
